import{o as ve,am as Be,aQ as ge,L as le,A as ne,ag as Me,cw as ie,ab as U,be as Te,b as Se,i as Le,d as te,u as ye,a as d,c as N,k as m,w as f,l as F,f as I,E as be,C as g,n as u,e as se,_ as he,s as Ie,B as $e,c3 as Ae,ct as Oe,al as Re,r as $,av as Ve,aY as Pe,Q as A,cs as re,b_ as ue,O as ze,t as De,aC as O,af as x,D as B,j as v,ai as de,H as W,m as H,aq as G,G as _,aM as ee,bc as He,ax as Ue,a4 as Ce,cx as Ee,aR as ke,at as ce,bC as Fe,a7 as Ne,bk as fe,c4 as me}from"./index.cf05daec.js";import{E as Xe}from"./index.f206c1c5.js";import{E as Ke,u as Ye,a as je}from"./index.895bf0b1.js";import{i as qe}from"./validator.c8fe8fef.js";const We=(e,n,l)=>{let a={offsetX:0,offsetY:0};const t=c=>{const V=c.clientX,T=c.clientY,{offsetX:h,offsetY:C}=a,i=e.value.getBoundingClientRect(),p=i.left,P=i.top,E=i.width,S=i.height,K=document.documentElement.clientWidth,Q=document.documentElement.clientHeight,Z=-p+h,k=-P+C,Y=K-p-E+h,J=Q-P-S+C,j=z=>{const q=Math.min(Math.max(h+z.clientX-V,Z),Y),D=Math.min(Math.max(C+z.clientY-T,k),J);a={offsetX:q,offsetY:D},e.value.style.transform=`translate(${le(q)}, ${le(D)})`},w=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",w)},o=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",t)},s=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",t)};ve(()=>{Be(()=>{l.value?o():s()})}),ge(()=>{s()})},Ge=(e,n)=>{let l;ne(()=>e.value,a=>{var t,o;a?(l=document.activeElement,Me(n)&&((o=(t=n.value).focus)==null||o.call(t))):l.focus()})},oe="_trap-focus-children",M=[],pe=e=>{if(M.length===0)return;const n=M[M.length-1][oe];if(n.length>0&&e.code===Te.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const l=e.shiftKey,a=e.target===n[0],t=e.target===n[n.length-1];a&&l&&(e.preventDefault(),n[n.length-1].focus()),t&&!l&&(e.preventDefault(),n[0].focus())}},Qe={beforeMount(e){e[oe]=ie(e),M.push(e),M.length<=1&&document.addEventListener("keydown",pe)},updated(e){U(()=>{e[oe]=ie(e)})},unmounted(){M.shift(),M.length===0&&document.removeEventListener("keydown",pe)}},Ze=Se({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Le}}),Je={click:e=>e instanceof MouseEvent},xe=["href"],_e=te({name:"ElLink"}),en=te({..._e,props:Ze,emits:Je,setup(e,{emit:n}){const l=e,a=ye("link");function t(o){l.disabled||n("click",o)}return(o,s)=>(d(),N("a",{class:u([I(a).b(),I(a).m(o.type),I(a).is("disabled",o.disabled),I(a).is("underline",o.underline&&!o.disabled)]),href:o.disabled||!o.href?void 0:o.href,onClick:t},[o.icon?(d(),m(I(be),{key:0},{default:f(()=>[(d(),m(F(o.icon)))]),_:1})):g("v-if",!0),o.$slots.default?(d(),N("span",{key:1,class:u(I(a).e("inner"))},[se(o.$slots,"default")],2)):g("v-if",!0),o.$slots.icon?se(o.$slots,"icon",{key:2}):g("v-if",!0)],10,xe))}});var nn=he(en,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Cn=Ie(nn),sn=te({name:"ElMessageBox",directives:{TrapFocus:Qe},components:{ElButton:$e,ElFocusTrap:Ae,ElInput:Xe,ElOverlay:Ke,ElIcon:be,...Oe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:qe},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:l}=Re(),a=ye("message-box"),t=$(!1),{nextZIndex:o}=Ve(),s=Pe({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),c=A(()=>{const r=s.type;return{[a.bm("icon",r)]:r&&re[r]}}),V=ue(),T=ue(),h=ze(A(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),C=A(()=>s.icon||re[s.type]||""),i=A(()=>!!s.message),p=$(),P=$(),E=$(),S=$(),K=$(),Q=A(()=>s.confirmButtonClass);ne(()=>s.inputValue,async r=>{await U(),e.boxType==="prompt"&&r!==null&&z()},{immediate:!0}),ne(()=>t.value,r=>{var y,L;r&&(e.boxType!=="prompt"&&(s.autofocus?E.value=(L=(y=K.value)==null?void 0:y.$el)!=null?L:p.value:E.value=p.value),s.zIndex=o()),e.boxType==="prompt"&&(r?U().then(()=>{var ae;S.value&&S.value.$el&&(s.autofocus?E.value=(ae=q())!=null?ae:p.value:E.value=p.value)}):(s.editorErrorMessage="",s.validateError=!1))});const Z=A(()=>e.draggable);We(p,P,Z),ve(async()=>{await U(),e.closeOnHashChange&&window.addEventListener("hashchange",k)}),ge(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",k)});function k(){!t.value||(t.value=!1,U(()=>{s.action&&n("action",s.action)}))}const Y=()=>{e.closeOnClickModal&&w(s.distinguishCancelAndClose?"close":"cancel")},J=je(Y),j=r=>{if(s.inputType!=="textarea")return r.preventDefault(),w("confirm")},w=r=>{var y;e.boxType==="prompt"&&r==="confirm"&&!z()||(s.action=r,s.beforeClose?(y=s.beforeClose)==null||y.call(s,r,s,k):k())},z=()=>{if(e.boxType==="prompt"){const r=s.inputPattern;if(r&&!r.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||l("el.messagebox.error"),s.validateError=!0,!1;const y=s.inputValidator;if(typeof y=="function"){const L=y(s.inputValue);if(L===!1)return s.editorErrorMessage=s.inputErrorMessage||l("el.messagebox.error"),s.validateError=!0,!1;if(typeof L=="string")return s.editorErrorMessage=L,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},q=()=>{const r=S.value.$refs;return r.input||r.textarea},D=()=>{w("close")},we=()=>{e.closeOnPressEscape&&D()};return e.lockScroll&&Ye(t),Ge(t),{...De(s),ns:a,overlayEvent:J,visible:t,hasMessage:i,typeClass:c,contentId:V,inputId:T,btnSize:h,iconComponent:C,confirmButtonClasses:Q,rootRef:p,focusStartRef:E,headerRef:P,inputRef:S,confirmRef:K,doClose:k,handleClose:D,onCloseRequested:we,handleWrapperClick:Y,handleInputEnter:j,handleAction:w,t:l}}}),on=["aria-label","aria-describedby"],tn=["aria-label"],an=["id"];function ln(e,n,l,a,t,o){const s=O("el-icon"),c=O("close"),V=O("el-input"),T=O("el-button"),h=O("el-focus-trap"),C=O("el-overlay");return d(),m(He,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=i=>e.$emit("vanish")),persisted:""},{default:f(()=>[x(B(C,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:f(()=>[v("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...i)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...i)),onMousedown:n[9]||(n[9]=(...i)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...i)),onMouseup:n[10]||(n[10]=(...i)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...i))},[B(h,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:f(()=>[v("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:de(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=W(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(d(),N("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[v("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(d(),m(s,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:f(()=>[(d(),m(F(e.iconComponent)))]),_:1},8,["class"])):g("v-if",!0),v("span",null,H(e.title),1)],2),e.showClose?(d(),N("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=i=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=G(W(i=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[B(s,{class:u(e.ns.e("close"))},{default:f(()=>[B(c)]),_:1},8,["class"])],42,tn)):g("v-if",!0)],2)):g("v-if",!0),v("div",{id:e.contentId,class:u(e.ns.e("content"))},[v("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(d(),m(s,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:f(()=>[(d(),m(F(e.iconComponent)))]),_:1},8,["class"])):g("v-if",!0),e.hasMessage?(d(),N("div",{key:1,class:u(e.ns.e("message"))},[se(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(d(),m(F(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(d(),m(F(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:f(()=>[_(H(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):g("v-if",!0)],2),x(v("div",{class:u(e.ns.e("input"))},[B(V,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=i=>e.inputValue=i),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:G(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),v("div",{class:u(e.ns.e("errormsg")),style:de({visibility:e.editorErrorMessage?"visible":"hidden"})},H(e.editorErrorMessage),7)],2),[[ee,e.showInput]])],10,an),v("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(d(),m(T,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=i=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=G(W(i=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:f(()=>[_(H(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):g("v-if",!0),x(B(T,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=i=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=G(W(i=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:f(()=>[_(H(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[ee,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,on)]),_:3},8,["z-index","overlay-class","mask"]),[[ee,e.visible]])]),_:3})}var rn=he(sn,[["render",ln],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const X=new Map,un=e=>{let n=document.body;return e.appendTo&&(Ce(e.appendTo)&&(n=document.querySelector(e.appendTo)),me(e.appendTo)&&(n=e.appendTo),me(n)||(n=document.body)),n},dn=(e,n,l=null)=>{const a=B(rn,e,fe(e.message)||Ee(e.message)?{default:fe(e.message)?e.message:()=>e.message}:null);return a.appContext=l,ke(a,n),un(e).appendChild(n.firstElementChild),a.component},cn=()=>document.createElement("div"),fn=(e,n)=>{const l=cn();e.onVanish=()=>{ke(null,l),X.delete(t)},e.onAction=o=>{const s=X.get(t);let c;e.showInput?c={value:t.inputValue,action:o}:c=o,e.callback?e.callback(c,a.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?s.reject("close"):s.reject("cancel"):s.resolve(c)};const a=dn(e,l,n),t=a.proxy;for(const o in e)ce(e,o)&&!ce(t.$props,o)&&(t[o]=e[o]);return t.visible=!0,t};function R(e,n=null){if(!Ue)return Promise.reject();let l;return Ce(e)||Ee(e)?e={message:e}:l=e.callback,new Promise((a,t)=>{const o=fn(e,n!=null?n:R._context);X.set(o,{options:e,callback:l,resolve:a,reject:t})})}const mn=["alert","confirm","prompt"],pn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};mn.forEach(e=>{R[e]=vn(e)});function vn(e){return(n,l,a,t)=>{let o="";return Fe(l)?(a=l,o=""):Ne(l)?o="":o=l,R(Object.assign({title:o,message:n,type:"",...pn[e]},a,{boxType:e}),t)}}R.close=()=>{X.forEach((e,n)=>{n.doClose()}),X.clear()};R._context=null;const b=R;b.install=e=>{b._context=e._context,e.config.globalProperties.$msgbox=b,e.config.globalProperties.$messageBox=b,e.config.globalProperties.$alert=b.alert,e.config.globalProperties.$confirm=b.confirm,e.config.globalProperties.$prompt=b.prompt};const En=b;export{Cn as E,En as a};
