import{j as ye,k as Y,ai as _e,aj as we,Q as M,ak as $e,d as j,al as Ee,am as Ce,u as Se,r as d,D as S,an as ke,ao as Ae,F as Ve,o as h,a3 as H,w as v,b as V,v as I,x as s,y as Z,a as b,ap as Fe,c as N,H as De,aq as Te,ab as Ie,aa as Ne,P as k,e as xe,a5 as se,ar as Oe,as as A,ad as ee,at as Pe,au as Be,z as Re,p as Le,av as W,t as Ke,$ as Ue,aw as Me,a9 as We,f as te,a4 as He,_ as ze}from"./index.dcf6bbd3.js";import{u as je,E as qe}from"./el-input.bfaa5d5e.js";import{U as x,I as z,C as ae}from"./event.9443ec1f.js";import{d as Ge}from"./debounce.8eab8f81.js";const Qe=ye({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Y(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Y([Function,Array]),default:_e},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:we.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),Je={[x]:i=>M(i),[z]:i=>M(i),[ae]:i=>M(i),focus:i=>i instanceof FocusEvent,blur:i=>i instanceof FocusEvent,clear:()=>!0,select:i=>$e(i)},Xe=["aria-expanded","aria-owns"],Ye={key:0},Ze=["id","aria-selected","onClick"],oe="ElAutocomplete",et=j({name:oe,inheritAttrs:!1}),tt=j({...et,props:Qe,emits:Je,setup(i,{expose:F,emit:c}){const o=i,O=je(),P=Ee(),B=Ce(),l=Se("autocomplete"),n=d(),E=d(),u=d(),r=d();let y=!1,_=!1;const p=d([]),t=d(-1),q=d(""),g=d(!1),D=d(!1),w=d(!1),C=S(()=>l.b(String(ke()))),le=S(()=>P.style),m=S(()=>(p.value.length>0||w.value)&&g.value),G=S(()=>!o.hideLoading&&w.value),ne=S(()=>n.value?Array.from(n.value.$el.querySelectorAll("input")):[]),ue=async()=>{await Le(),m.value&&(q.value=`${n.value.$el.offsetWidth}px`)},re=()=>{_=!0},ie=()=>{_=!1,t.value=-1},Q=Ge(async e=>{if(D.value)return;const a=f=>{w.value=!1,!D.value&&(W(f)?(p.value=f,t.value=o.highlightFirstItem?0:-1):Ke(oe,"autocomplete suggestions must be an array"))};if(w.value=!0,W(o.fetchSuggestions))a(o.fetchSuggestions);else{const f=await o.fetchSuggestions(e,a);W(f)&&a(f)}},o.debounce),ce=e=>{const a=!!e;if(c(z,e),c(x,e),D.value=!1,g.value||(g.value=a),!o.triggerOnFocus&&!e){D.value=!0,p.value=[];return}Q(e)},pe=e=>{var a;B.value||(((a=e.target)==null?void 0:a.tagName)!=="INPUT"||ne.value.includes(document.activeElement))&&(g.value=!0)},de=e=>{c(ae,e)},fe=e=>{_||(g.value=!0,c("focus",e),o.triggerOnFocus&&!y&&Q(String(o.modelValue)))},ve=e=>{_||c("blur",e)},ge=()=>{g.value=!1,c(x,""),c("clear")},J=async()=>{m.value&&t.value>=0&&t.value<p.value.length?R(p.value[t.value]):o.selectWhenUnmatched&&(c("select",{value:o.modelValue}),p.value=[],t.value=-1)},me=e=>{m.value&&(e.preventDefault(),e.stopPropagation(),T())},T=()=>{g.value=!1},he=()=>{var e;(e=n.value)==null||e.focus()},be=()=>{var e;(e=n.value)==null||e.blur()},R=async e=>{c(z,e[o.valueKey]),c(x,e[o.valueKey]),c("select",e),p.value=[],t.value=-1},L=e=>{if(!m.value||w.value)return;if(e<0){t.value=-1;return}e>=p.value.length&&(e=p.value.length-1);const a=E.value.querySelector(`.${l.be("suggestion","wrap")}`),$=a.querySelectorAll(`.${l.be("suggestion","list")} li`)[e],K=a.scrollTop,{offsetTop:X,scrollHeight:U}=$;X+U>K+a.clientHeight&&(a.scrollTop+=U),X<K&&(a.scrollTop-=U),t.value=e,n.value.ref.setAttribute("aria-activedescendant",`${C.value}-item-${t.value}`)};return Ae(r,()=>{m.value&&T()}),Ve(()=>{n.value.ref.setAttribute("role","textbox"),n.value.ref.setAttribute("aria-autocomplete","list"),n.value.ref.setAttribute("aria-controls","id"),n.value.ref.setAttribute("aria-activedescendant",`${C.value}-item-${t.value}`),y=n.value.ref.hasAttribute("readonly")}),F({highlightedIndex:t,activated:g,loading:w,inputRef:n,popperRef:u,suggestions:p,handleSelect:R,handleKeyEnter:J,focus:he,blur:be,close:T,highlight:L}),(e,a)=>(h(),H(s(Be),{ref_key:"popperRef",ref:u,visible:s(m),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[s(l).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${s(l).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ue,onShow:re,onHide:ie},{content:v(()=>[V("div",{ref_key:"regionRef",ref:E,class:I([s(l).b("suggestion"),s(l).is("loading",s(G))]),style:Z({[e.fitInputWidth?"width":"minWidth"]:q.value,outline:"none"}),role:"region"},[b(s(Fe),{id:s(C),tag:"ul","wrap-class":s(l).be("suggestion","wrap"),"view-class":s(l).be("suggestion","list"),role:"listbox"},{default:v(()=>[s(G)?(h(),N("li",Ye,[b(s(De),{class:I(s(l).is("loading"))},{default:v(()=>[b(s(Te))]),_:1},8,["class"])])):(h(!0),N(Ie,{key:1},Ne(p.value,(f,$)=>(h(),N("li",{id:`${s(C)}-item-${$}`,key:$,class:I({highlighted:t.value===$}),role:"option","aria-selected":t.value===$,onClick:K=>R(f)},[k(e.$slots,"default",{item:f},()=>[xe(se(f[e.valueKey]),1)])],10,Ze))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:v(()=>[V("div",{ref_key:"listboxRef",ref:r,class:I([s(l).b(),e.$attrs.class]),style:Z(s(le)),role:"combobox","aria-haspopup":"listbox","aria-expanded":s(m),"aria-owns":s(C)},[b(s(qe),Oe({ref_key:"inputRef",ref:n},s(O),{"model-value":e.modelValue,onInput:ce,onChange:de,onFocus:fe,onBlur:ve,onClear:ge,onKeydown:[a[0]||(a[0]=A(ee(f=>L(t.value-1),["prevent"]),["up"])),a[1]||(a[1]=A(ee(f=>L(t.value+1),["prevent"]),["down"])),A(J,["enter"]),A(T,["tab"]),A(me,["esc"])],onMousedown:pe}),Pe({_:2},[e.$slots.prepend?{name:"prepend",fn:v(()=>[k(e.$slots,"prepend")])}:void 0,e.$slots.append?{name:"append",fn:v(()=>[k(e.$slots,"append")])}:void 0,e.$slots.prefix?{name:"prefix",fn:v(()=>[k(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:v(()=>[k(e.$slots,"suffix")])}:void 0]),1040,["model-value","onKeydown"])],14,Xe)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var st=Re(tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const at=Ue(st);const ot={class:"search-path"},lt={class:"input-box"},nt={class:"check-item"},ut={class:"link"},rt=j({__name:"index",setup(i){const{router:F}=We(),c=F.getRoutes().filter(u=>u.meta.icon),o=d(""),O=(u,r)=>{const y=u?c.filter(P(u)):c;r(y)},P=u=>r=>r.meta.title.toLowerCase().indexOf(u.toLowerCase())!==-1||r.path.toLowerCase().indexOf(u.toLowerCase())!==-1,B=u=>{F.push(u.path),l.value=!1},l=d(!1),n=(u=!0)=>{u&&setTimeout(()=>{var r;(r=E.value)==null||r.focus()},200),l.value=u},E=d();return(u,r)=>{const y=te("svg-icon-vue"),_=at,p=te("message-box-vue");return h(),N("div",ot,[b(y,{name:"sousuo",onClick:n}),(h(),H(Me,{to:"body"},[b(p,{isVisible:l.value,"onUpdate:isVisible":r[1]||(r[1]=t=>l.value=t),"onUpdate:isVisibel":n},{default:v(()=>[V("div",lt,[b(_,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=t=>o.value=t),"fetch-suggestions":O,"popper-class":"my-autocomplete",placeholder:"\u83DC\u5355\u641C\u7D22 \uFF1A\u652F\u6301\u83DC\u5355\u540D\u79F0\u3001\u8DEF\u5F84",onSelect:B,"prefix-icon":"search",ref_key:"autocomplete",ref:E},{default:v(({item:t})=>[V("div",nt,[(h(),H(He(t.meta.icon),{style:{width:"16px","margin-right":"10px"}})),V("span",ut,se(t.meta.title),1)])]),_:1},8,["modelValue"])])]),_:1},8,["isVisible"])]))])}}});const vt=ze(rt,[["__scopeId","data-v-aa0d57e0"]]);export{vt as default};
