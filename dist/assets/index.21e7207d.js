import{d as A,aY as G,r as f,Q as h,ay as J,B as O,a as r,k as s,w as n,f as l,D as b,c as k,F as E,I as U,aZ as w,G as m,m as B,C,j as x,a_ as Q,a$ as Y,J as Z}from"./index.7e949226.js";import F from"./index.ca19d450.js";import{E as q}from"./index.d55c6e20.js";import{E as z,a as K}from"./index.3ccbcd5e.js";import{E as W,d as X}from"./index.9e5b9d93.js";import{E as ee}from"./index.f2f9cb47.js";import"./debounce.4faba3d4.js";import"./index.ae4e36ae.js";import"./validator.81dd2afd.js";import"./index.751a1d12.js";import"./index.5adcfad1.js";const le=c=>(Q("data-v-c138bb88"),c=c(),Y(),c),oe=le(()=>x("hr",{style:{"border-color":"#ebeef5","margin-bottom":"10px"}},null,-1)),ae={class:"footer"},te=A({__name:"index",props:{type:null,config:null,template:null,close:null,rules:null,confirmHandler:null,cancelHandler:null},setup(c){const o=c;console.log(o.rules);const I=G(o.rules),p=f(!0),a=f({});for(const u in o.config)a.value[u]=o.config[u];const D=h(()=>{switch(o.type){case"get":return"\u67E5\u770B\u7528\u6237";case"edit":return"\u7F16\u8F91\u7528\u6237";case"add":return"\u65B0\u589E\u7528\u6237"}}),i=h(()=>o.type==="get"),R=o.template.filter(u=>u.canModify===void 0||u.canModify===!0),S=()=>{o.cancelHandler(),p.value=!1,setTimeout(()=>{o.close()},200)},v=f(),_=f(null),g=f(null),H=async u=>{!u||await u.validate((d,y)=>{d&&(o.confirmHandler(a),_.value.length&&_.value[0].handleUpload(),g.value.length&&g.value[0].handleUpload(),p.value=!1,setTimeout(()=>{o.close()},200))})},N=()=>{p.value=!1,o.cancelHandler(),o.close()};return(u,d)=>{const y=q,P=z,T=K,$=W,L=X,M=J,V=O,j=ee;return r(),s(j,{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=e=>p.value=e),onClosed:N,title:l(D)},{default:n(()=>[b(M,{height:"100%"},{default:n(()=>[oe,b(L,{class:"form",model:l(a),rules:I,ref_key:"ruleFormRef",ref:v},{default:n(()=>[(r(!0),k(U,null,E(l(R),e=>(r(),s($,{label:e.label+":","label-width":"100px",prop:e.prop},{default:n(()=>[e.type==="input"?(r(),s(y,{key:0,modelValue:l(a)[e.prop],"onUpdate:modelValue":t=>l(a)[e.prop]=t,disabled:l(i)},null,8,["modelValue","onUpdate:modelValue","disabled"])):e.type==="select"?(r(),s(T,{key:1,disabled:l(i),placeholder:`\u8BF7\u9009\u62E9${e.label}`,style:{width:"100%"},modelValue:l(a)[e.prop],"onUpdate:modelValue":t=>l(a)[e.prop]=t},{default:n(()=>[(r(!0),k(U,null,E(e.children,t=>(r(),s(P,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:2},1032,["disabled","placeholder","modelValue","onUpdate:modelValue"])):e.type==="avatar"?(r(),s(F,w({key:2,ref_for:!0,ref_key:"avatarRef",ref:_},e.config,{disabled:l(i),"image-url":c.config[e.config.imageProps],modelValue:l(a)[e.prop],"onUpdate:modelValue":t=>l(a)[e.prop]=t}),{tip:n(()=>[m(B(e.config.tip),1)]),_:2},1040,["disabled","image-url","modelValue","onUpdate:modelValue"])):e.type==="photo"?(r(),s(F,w({key:3,ref_for:!0,ref_key:"photoRef",ref:g},e.config,{disabled:l(i),"image-url":c.config[e.config.imageProps],modelValue:l(a)[e.prop],"onUpdate:modelValue":t=>l(a)[e.prop]=t}),{tip:n(()=>[m(B(e.config.tip),1)]),_:2},1040,["disabled","image-url","modelValue","onUpdate:modelValue"])):C("",!0)]),_:2},1032,["label","prop"]))),256))]),_:1},8,["model","rules"])]),_:1})]),footer:n(()=>[x("div",ae,[b(V,{onClick:S},{default:n(()=>[m("\u53D6\u6D88")]),_:1}),l(i)?C("",!0):(r(),s(V,{key:0,type:"primary",onClick:d[0]||(d[0]=e=>H(v.value))},{default:n(()=>[m("\u786E\u5B9A")]),_:1}))])]),_:1},8,["modelValue","title"])}}}),ge=Z(te,[["__scopeId","data-v-c138bb88"]]);export{ge as default};
