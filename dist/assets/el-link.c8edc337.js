import{p as ve,b0 as Be,aj as ge,bH as le,w as ne,aZ as Me,cq as re,o as U,W as Te,b as Se,az as Le,e as te,h as be,q as d,G as N,t as m,x as f,M as F,A as I,E as ye,D as g,z as u,S as se,_ as he,Y as Ie,aG as $e,b$ as Ae,cr as Oe,u as Re,r as $,j as Ve,br as ze,n as A,cs as ie,bF as ue,aX as Pe,aA as De,bb as O,Q as x,v as B,y as v,B as de,C as W,a4 as H,a8 as G,as as _,R as ee,T as He,a as Ue,a3 as Ce,ct as Ee,bn as ke,b5 as ce,bN as Fe,aU as Ne,a2 as fe,c0 as me}from"./index.fe16509b.js";import{E as Xe}from"./index.8745d081.js";import{E as Ke,u as Ye,a as je}from"./index.fe7fc375.js";import{i as qe}from"./validator.c2434db1.js";const We=(e,n,l)=>{let a={offsetX:0,offsetY:0};const t=c=>{const V=c.clientX,T=c.clientY,{offsetX:h,offsetY:C}=a,r=e.value.getBoundingClientRect(),p=r.left,z=r.top,E=r.width,S=r.height,K=document.documentElement.clientWidth,Z=document.documentElement.clientHeight,Q=-p+h,k=-z+C,Y=K-p-E+h,J=Z-z-S+C,j=P=>{const q=Math.min(Math.max(h+P.clientX-V,Q),Y),D=Math.min(Math.max(C+P.clientY-T,k),J);a={offsetX:q,offsetY:D},e.value.style.transform=`translate(${le(q)}, ${le(D)})`},w=()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",w)},o=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",t)},s=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",t)};ve(()=>{Be(()=>{l.value?o():s()})}),ge(()=>{s()})},Ge=(e,n)=>{let l;ne(()=>e.value,a=>{var t,o;a?(l=document.activeElement,Me(n)&&((o=(t=n.value).focus)==null||o.call(t))):l.focus()})},oe="_trap-focus-children",M=[],pe=e=>{if(M.length===0)return;const n=M[M.length-1][oe];if(n.length>0&&e.code===Te.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const l=e.shiftKey,a=e.target===n[0],t=e.target===n[n.length-1];a&&l&&(e.preventDefault(),n[n.length-1].focus()),t&&!l&&(e.preventDefault(),n[0].focus())}},Ze={beforeMount(e){e[oe]=re(e),M.push(e),M.length<=1&&document.addEventListener("keydown",pe)},updated(e){U(()=>{e[oe]=re(e)})},unmounted(){M.shift(),M.length===0&&document.removeEventListener("keydown",pe)}},Qe=Se({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Le}}),Je={click:e=>e instanceof MouseEvent},xe=["href"],_e=te({name:"ElLink"}),en=te({..._e,props:Qe,emits:Je,setup(e,{emit:n}){const l=e,a=be("link");function t(o){l.disabled||n("click",o)}return(o,s)=>(d(),N("a",{class:u([I(a).b(),I(a).m(o.type),I(a).is("disabled",o.disabled),I(a).is("underline",o.underline&&!o.disabled)]),href:o.disabled||!o.href?void 0:o.href,onClick:t},[o.icon?(d(),m(I(ye),{key:0},{default:f(()=>[(d(),m(F(o.icon)))]),_:1})):g("v-if",!0),o.$slots.default?(d(),N("span",{key:1,class:u(I(a).e("inner"))},[se(o.$slots,"default")],2)):g("v-if",!0),o.$slots.icon?se(o.$slots,"icon",{key:2}):g("v-if",!0)],10,xe))}});var nn=he(en,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Cn=Ie(nn),sn=te({name:"ElMessageBox",directives:{TrapFocus:Ze},components:{ElButton:$e,ElFocusTrap:Ae,ElInput:Xe,ElOverlay:Ke,ElIcon:ye,...Oe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:qe},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:l}=Re(),a=be("message-box"),t=$(!1),{nextZIndex:o}=Ve(),s=ze({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),c=A(()=>{const i=s.type;return{[a.bm("icon",i)]:i&&ie[i]}}),V=ue(),T=ue(),h=Pe(A(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),C=A(()=>s.icon||ie[s.type]||""),r=A(()=>!!s.message),p=$(),z=$(),E=$(),S=$(),K=$(),Z=A(()=>s.confirmButtonClass);ne(()=>s.inputValue,async i=>{await U(),e.boxType==="prompt"&&i!==null&&P()},{immediate:!0}),ne(()=>t.value,i=>{var b,L;i&&(e.boxType!=="prompt"&&(s.autofocus?E.value=(L=(b=K.value)==null?void 0:b.$el)!=null?L:p.value:E.value=p.value),s.zIndex=o()),e.boxType==="prompt"&&(i?U().then(()=>{var ae;S.value&&S.value.$el&&(s.autofocus?E.value=(ae=q())!=null?ae:p.value:E.value=p.value)}):(s.editorErrorMessage="",s.validateError=!1))});const Q=A(()=>e.draggable);We(p,z,Q),ve(async()=>{await U(),e.closeOnHashChange&&window.addEventListener("hashchange",k)}),ge(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",k)});function k(){!t.value||(t.value=!1,U(()=>{s.action&&n("action",s.action)}))}const Y=()=>{e.closeOnClickModal&&w(s.distinguishCancelAndClose?"close":"cancel")},J=je(Y),j=i=>{if(s.inputType!=="textarea")return i.preventDefault(),w("confirm")},w=i=>{var b;e.boxType==="prompt"&&i==="confirm"&&!P()||(s.action=i,s.beforeClose?(b=s.beforeClose)==null||b.call(s,i,s,k):k())},P=()=>{if(e.boxType==="prompt"){const i=s.inputPattern;if(i&&!i.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||l("el.messagebox.error"),s.validateError=!0,!1;const b=s.inputValidator;if(typeof b=="function"){const L=b(s.inputValue);if(L===!1)return s.editorErrorMessage=s.inputErrorMessage||l("el.messagebox.error"),s.validateError=!0,!1;if(typeof L=="string")return s.editorErrorMessage=L,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},q=()=>{const i=S.value.$refs;return i.input||i.textarea},D=()=>{w("close")},we=()=>{e.closeOnPressEscape&&D()};return e.lockScroll&&Ye(t),Ge(t),{...De(s),ns:a,overlayEvent:J,visible:t,hasMessage:r,typeClass:c,contentId:V,inputId:T,btnSize:h,iconComponent:C,confirmButtonClasses:Z,rootRef:p,focusStartRef:E,headerRef:z,inputRef:S,confirmRef:K,doClose:k,handleClose:D,onCloseRequested:we,handleWrapperClick:Y,handleInputEnter:j,handleAction:w,t:l}}}),on=["aria-label","aria-describedby"],tn=["aria-label"],an=["id"];function ln(e,n,l,a,t,o){const s=O("el-icon"),c=O("close"),V=O("el-input"),T=O("el-button"),h=O("el-focus-trap"),C=O("el-overlay");return d(),m(He,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=r=>e.$emit("vanish")),persisted:""},{default:f(()=>[x(B(C,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:f(()=>[v("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...r)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...r)),onMousedown:n[9]||(n[9]=(...r)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...r)),onMouseup:n[10]||(n[10]=(...r)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...r))},[B(h,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:f(()=>[v("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:de(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=W(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(d(),N("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[v("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(d(),m(s,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:f(()=>[(d(),m(F(e.iconComponent)))]),_:1},8,["class"])):g("v-if",!0),v("span",null,H(e.title),1)],2),e.showClose?(d(),N("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=G(W(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[B(s,{class:u(e.ns.e("close"))},{default:f(()=>[B(c)]),_:1},8,["class"])],42,tn)):g("v-if",!0)],2)):g("v-if",!0),v("div",{id:e.contentId,class:u(e.ns.e("content"))},[v("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(d(),m(s,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:f(()=>[(d(),m(F(e.iconComponent)))]),_:1},8,["class"])):g("v-if",!0),e.hasMessage?(d(),N("div",{key:1,class:u(e.ns.e("message"))},[se(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(d(),m(F(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(d(),m(F(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:f(()=>[_(H(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):g("v-if",!0)],2),x(v("div",{class:u(e.ns.e("input"))},[B(V,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>e.inputValue=r),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:G(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),v("div",{class:u(e.ns.e("errormsg")),style:de({visibility:e.editorErrorMessage?"visible":"hidden"})},H(e.editorErrorMessage),7)],2),[[ee,e.showInput]])],10,an),v("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(d(),m(T,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=r=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=G(W(r=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:f(()=>[_(H(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):g("v-if",!0),x(B(T,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=r=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=G(W(r=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:f(()=>[_(H(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[ee,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,on)]),_:3},8,["z-index","overlay-class","mask"]),[[ee,e.visible]])]),_:3})}var rn=he(sn,[["render",ln],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const X=new Map,un=e=>{let n=document.body;return e.appendTo&&(Ce(e.appendTo)&&(n=document.querySelector(e.appendTo)),me(e.appendTo)&&(n=e.appendTo),me(n)||(n=document.body)),n},dn=(e,n,l=null)=>{const a=B(rn,e,fe(e.message)||Ee(e.message)?{default:fe(e.message)?e.message:()=>e.message}:null);return a.appContext=l,ke(a,n),un(e).appendChild(n.firstElementChild),a.component},cn=()=>document.createElement("div"),fn=(e,n)=>{const l=cn();e.onVanish=()=>{ke(null,l),X.delete(t)},e.onAction=o=>{const s=X.get(t);let c;e.showInput?c={value:t.inputValue,action:o}:c=o,e.callback?e.callback(c,a.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?s.reject("close"):s.reject("cancel"):s.resolve(c)};const a=dn(e,l,n),t=a.proxy;for(const o in e)ce(e,o)&&!ce(t.$props,o)&&(t[o]=e[o]);return t.visible=!0,t};function R(e,n=null){if(!Ue)return Promise.reject();let l;return Ce(e)||Ee(e)?e={message:e}:l=e.callback,new Promise((a,t)=>{const o=fn(e,n!=null?n:R._context);X.set(o,{options:e,callback:l,resolve:a,reject:t})})}const mn=["alert","confirm","prompt"],pn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};mn.forEach(e=>{R[e]=vn(e)});function vn(e){return(n,l,a,t)=>{let o="";return Fe(l)?(a=l,o=""):Ne(l)?o="":o=l,R(Object.assign({title:o,message:n,type:"",...pn[e]},a,{boxType:e}),t)}}R.close=()=>{X.forEach((e,n)=>{n.doClose()}),X.clear()};R._context=null;const y=R;y.install=e=>{y._context=e._context,e.config.globalProperties.$msgbox=y,e.config.globalProperties.$messageBox=y,e.config.globalProperties.$alert=y.alert,e.config.globalProperties.$confirm=y.confirm,e.config.globalProperties.$prompt=y.prompt};const En=y;export{Cn as E,En as a};
