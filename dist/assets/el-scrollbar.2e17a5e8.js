import{b as W,d as N,h as Q,u as q,r as i,H as L,at as Z,au as x,R as Y,a as H,k as M,w as G,ap as J,j as A,n as T,f as m,P as O,aq as ee,a4 as te,_ as X,as as le,c as I,B as j,G as ae,g as se,ai as E,Z as D,z as U,ao as oe,ae as K,p as re,Q as ne,o as ie,av as ce,e as ue,l as ve,A as fe,a8 as me,s as de}from"./index.d46c8804.js";import{t as he}from"./error.db406747.js";const F=Symbol("scrollbarContextKey"),S=4,pe={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},be=({move:h,size:c,bar:r})=>({[r.size]:c,transform:`translate${r.axis}(${h}%)`}),ye=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ge="Thumb",we=N({__name:"thumb",props:ye,setup(h){const c=h,r=Q(F),s=q("scrollbar");r||he(ge,"can not inject scrollbar context");const n=i(),v=i(),o=i({}),d=i(!1);let l=!1,y=!1,g=le?document.onselectstart:null;const t=L(()=>pe[c.vertical?"vertical":"horizontal"]),z=L(()=>be({size:c.size,move:c.move,bar:t.value})),_=L(()=>n.value[t.value.offset]**2/r.wrapElement[t.value.scrollSize]/c.ratio/v.value[t.value.offset]),B=a=>{var u;if(a.stopPropagation(),a.ctrlKey||[1,2].includes(a.button))return;(u=window.getSelection())==null||u.removeAllRanges(),C(a);const f=a.currentTarget;!f||(o.value[t.value.axis]=f[t.value.offset]-(a[t.value.client]-f.getBoundingClientRect()[t.value.direction]))},R=a=>{if(!v.value||!n.value||!r.wrapElement)return;const u=Math.abs(a.target.getBoundingClientRect()[t.value.direction]-a[t.value.client]),f=v.value[t.value.offset]/2,b=(u-f)*100*_.value/n.value[t.value.offset];r.wrapElement[t.value.scroll]=b*r.wrapElement[t.value.scrollSize]/100},C=a=>{a.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",k),g=document.onselectstart,document.onselectstart=()=>!1},P=a=>{if(!n.value||!v.value||l===!1)return;const u=o.value[t.value.axis];if(!u)return;const f=(n.value.getBoundingClientRect()[t.value.direction]-a[t.value.client])*-1,b=v.value[t.value.offset]-u,w=(f-b)*100*_.value/n.value[t.value.offset];r.wrapElement[t.value.scroll]=w*r.wrapElement[t.value.scrollSize]/100},k=()=>{l=!1,o.value[t.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",k),e(),y&&(d.value=!1)},$=()=>{y=!1,d.value=!!c.size},p=()=>{y=!0,d.value=l};Z(()=>{e(),document.removeEventListener("mouseup",k)});const e=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return x(Y(r,"scrollbarElement"),"mousemove",$),x(Y(r,"scrollbarElement"),"mouseleave",p),(a,u)=>(H(),M(te,{name:m(s).b("fade"),persisted:""},{default:G(()=>[J(A("div",{ref_key:"instance",ref:n,class:T([m(s).e("bar"),m(s).is(m(t).key)]),onMousedown:R},[A("div",{ref_key:"thumb",ref:v,class:T(m(s).e("thumb")),style:O(m(z)),onMousedown:B},null,38)],34),[[ee,a.always||d.value]])]),_:1},8,["name"]))}});var V=X(we,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Se=W({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),ze=N({__name:"bar",props:Se,setup(h,{expose:c}){const r=h,s=i(0),n=i(0);return c({handleScroll:o=>{if(o){const d=o.offsetHeight-S,l=o.offsetWidth-S;n.value=o.scrollTop*100/d*r.ratioY,s.value=o.scrollLeft*100/l*r.ratioX}}}),(o,d)=>(H(),I(ae,null,[j(V,{move:s.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),j(V,{move:n.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var _e=X(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const ke=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:se([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ee={scroll:({scrollTop:h,scrollLeft:c})=>[h,c].every(E)},He=N({name:"ElScrollbar"}),Te=N({...He,props:ke,emits:Ee,setup(h,{expose:c,emit:r}){const s=h,n=q("scrollbar");let v,o;const d=i(),l=i(),y=i(),g=i("0"),t=i("0"),z=i(),_=i(1),B=i(1),R=L(()=>{const e={};return s.height&&(e.height=D(s.height)),s.maxHeight&&(e.maxHeight=D(s.maxHeight)),[s.wrapStyle,e]}),C=()=>{var e;l.value&&((e=z.value)==null||e.handleScroll(l.value),r("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function P(e,a){me(e)?l.value.scrollTo(e):E(e)&&E(a)&&l.value.scrollTo(e,a)}const k=e=>{!E(e)||(l.value.scrollTop=e)},$=e=>{!E(e)||(l.value.scrollLeft=e)},p=()=>{if(!l.value)return;const e=l.value.offsetHeight-S,a=l.value.offsetWidth-S,u=e**2/l.value.scrollHeight,f=a**2/l.value.scrollWidth,b=Math.max(u,s.minSize),w=Math.max(f,s.minSize);_.value=u/(e-u)/(b/(e-b)),B.value=f/(a-f)/(w/(a-w)),t.value=b+S<e?`${b}px`:"",g.value=w+S<a?`${w}px`:""};return U(()=>s.noresize,e=>{e?(v==null||v(),o==null||o()):({stop:v}=oe(y,p),o=x("resize",p))},{immediate:!0}),U(()=>[s.maxHeight,s.height],()=>{s.native||K(()=>{var e;p(),l.value&&((e=z.value)==null||e.handleScroll(l.value))})}),re(F,ne({scrollbarElement:d,wrapElement:l})),ie(()=>{s.native||K(()=>{p()})}),ce(()=>p()),c({wrap$:l,update:p,scrollTo:P,setScrollTop:k,setScrollLeft:$,handleScroll:C}),(e,a)=>(H(),I("div",{ref_key:"scrollbar$",ref:d,class:T(m(n).b())},[A("div",{ref_key:"wrap$",ref:l,class:T([e.wrapClass,m(n).e("wrap"),{[m(n).em("wrap","hidden-default")]:!e.native}]),style:O(m(R)),onScroll:C},[(H(),M(ve(e.tag),{ref_key:"resize$",ref:y,class:T([m(n).e("view"),e.viewClass]),style:O(e.viewStyle)},{default:G(()=>[ue(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?fe("v-if",!0):(H(),M(_e,{key:0,ref_key:"barRef",ref:z,height:t.value,width:g.value,always:e.always,"ratio-x":B.value,"ratio-y":_.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Be=X(Te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Le=de(Be);export{Le as E};
