import{b as ye,g as Y,a6 as _e,a7 as M,a8 as we,d as G,a9 as $e,K as Ee,u as Ce,r as d,H as C,aa as Se,o as ke,a as h,k as H,w as v,j as A,n as I,f as t,P as Z,B as b,c as N,E as Ae,O as Fe,G as Ve,C as De,e as S,D as Te,m as se,ab as Ie,ac as k,F as ee,ad as Ne,_ as xe,ae as Oe,a0 as W,s as Be,z as Pe,af as Re,ag as te,l as Ke}from"./index.d46c8804.js";import{u as Le,E as Ue}from"./el-input.89c01527.js";import{E as Me}from"./el-scrollbar.2e17a5e8.js";import{u as We,g as He,E as ze}from"./el-popper.6373bb4c.js";import{u as Ge}from"./useRoute.6fcb712e.js";import{U as x,I as z,C as ae}from"./event.9443ec1f.js";import{t as je}from"./error.db406747.js";import{d as qe}from"./debounce.775a9955.js";import{_ as Je}from"./_plugin-vue_export-helper.cdc0426e.js";import"./index.1030af3d.js";import"./isNil.b8a77b53.js";const Qe=ye({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Y(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Y([Function,Array]),default:_e},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:We.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),Xe={[x]:c=>M(c),[z]:c=>M(c),[ae]:c=>M(c),focus:c=>c instanceof FocusEvent,blur:c=>c instanceof FocusEvent,clear:()=>!0,select:c=>we(c)},Ye=["aria-expanded","aria-owns"],Ze={key:0},et=["id","aria-selected","onClick"],oe="ElAutocomplete",tt=G({name:oe,inheritAttrs:!1}),st=G({...tt,props:Qe,emits:Xe,setup(c,{expose:F,emit:p}){const o=c,O=Le(),B=$e(),P=Ee(),l=Ce("autocomplete"),u=d(),i=d(),n=d(),y=d();let V=!1,_=!1;const s=d([]),r=d(-1),j=d(""),g=d(!1),D=d(!1),w=d(!1),E=C(()=>l.b(String(He()))),le=C(()=>B.style),m=C(()=>(s.value.length>0||w.value)&&g.value),q=C(()=>!o.hideLoading&&w.value),ne=C(()=>u.value?Array.from(u.value.$el.querySelectorAll("input")):[]),ue=async()=>{await Oe(),m.value&&(j.value=`${u.value.$el.offsetWidth}px`)},re=()=>{_=!0},ie=()=>{_=!1,r.value=-1},J=qe(async e=>{if(D.value)return;const a=f=>{w.value=!1,!D.value&&(W(f)?(s.value=f,r.value=o.highlightFirstItem?0:-1):je(oe,"autocomplete suggestions must be an array"))};if(w.value=!0,W(o.fetchSuggestions))a(o.fetchSuggestions);else{const f=await o.fetchSuggestions(e,a);W(f)&&a(f)}},o.debounce),ce=e=>{const a=!!e;if(p(z,e),p(x,e),D.value=!1,g.value||(g.value=a),!o.triggerOnFocus&&!e){D.value=!0,s.value=[];return}J(e)},pe=e=>{var a;P.value||(((a=e.target)==null?void 0:a.tagName)!=="INPUT"||ne.value.includes(document.activeElement))&&(g.value=!0)},de=e=>{p(ae,e)},fe=e=>{_||(g.value=!0,p("focus",e),o.triggerOnFocus&&!V&&J(String(o.modelValue)))},ve=e=>{_||p("blur",e)},ge=()=>{g.value=!1,p(x,""),p("clear")},Q=async()=>{m.value&&r.value>=0&&r.value<s.value.length?R(s.value[r.value]):o.selectWhenUnmatched&&(p("select",{value:o.modelValue}),s.value=[],r.value=-1)},me=e=>{m.value&&(e.preventDefault(),e.stopPropagation(),T())},T=()=>{g.value=!1},he=()=>{var e;(e=u.value)==null||e.focus()},be=()=>{var e;(e=u.value)==null||e.blur()},R=async e=>{p(z,e[o.valueKey]),p(x,e[o.valueKey]),p("select",e),s.value=[],r.value=-1},K=e=>{if(!m.value||w.value)return;if(e<0){r.value=-1;return}e>=s.value.length&&(e=s.value.length-1);const a=i.value.querySelector(`.${l.be("suggestion","wrap")}`),$=a.querySelectorAll(`.${l.be("suggestion","list")} li`)[e],L=a.scrollTop,{offsetTop:X,scrollHeight:U}=$;X+U>L+a.clientHeight&&(a.scrollTop+=U),X<L&&(a.scrollTop-=U),r.value=e,u.value.ref.setAttribute("aria-activedescendant",`${E.value}-item-${r.value}`)};return Se(y,()=>{m.value&&T()}),ke(()=>{u.value.ref.setAttribute("role","textbox"),u.value.ref.setAttribute("aria-autocomplete","list"),u.value.ref.setAttribute("aria-controls","id"),u.value.ref.setAttribute("aria-activedescendant",`${E.value}-item-${r.value}`),V=u.value.ref.hasAttribute("readonly")}),F({highlightedIndex:r,activated:g,loading:w,inputRef:u,popperRef:n,suggestions:s,handleSelect:R,handleKeyEnter:Q,focus:he,blur:be,close:T,highlight:K}),(e,a)=>(h(),H(t(ze),{ref_key:"popperRef",ref:n,visible:t(m),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[t(l).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${t(l).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ue,onShow:re,onHide:ie},{content:v(()=>[A("div",{ref_key:"regionRef",ref:i,class:I([t(l).b("suggestion"),t(l).is("loading",t(q))]),style:Z({[e.fitInputWidth?"width":"minWidth"]:j.value,outline:"none"}),role:"region"},[b(t(Me),{id:t(E),tag:"ul","wrap-class":t(l).be("suggestion","wrap"),"view-class":t(l).be("suggestion","list"),role:"listbox"},{default:v(()=>[t(q)?(h(),N("li",Ze,[b(t(Ae),{class:I(t(l).is("loading"))},{default:v(()=>[b(t(Fe))]),_:1},8,["class"])])):(h(!0),N(Ve,{key:1},De(s.value,(f,$)=>(h(),N("li",{id:`${t(E)}-item-${$}`,key:$,class:I({highlighted:r.value===$}),role:"option","aria-selected":r.value===$,onClick:L=>R(f)},[S(e.$slots,"default",{item:f},()=>[Te(se(f[e.valueKey]),1)])],10,et))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:v(()=>[A("div",{ref_key:"listboxRef",ref:y,class:I([t(l).b(),e.$attrs.class]),style:Z(t(le)),role:"combobox","aria-haspopup":"listbox","aria-expanded":t(m),"aria-owns":t(E)},[b(t(Ue),Ie({ref_key:"inputRef",ref:u},t(O),{"model-value":e.modelValue,onInput:ce,onChange:de,onFocus:fe,onBlur:ve,onClear:ge,onKeydown:[a[0]||(a[0]=k(ee(f=>K(r.value-1),["prevent"]),["up"])),a[1]||(a[1]=k(ee(f=>K(r.value+1),["prevent"]),["down"])),k(Q,["enter"]),k(T,["tab"]),k(me,["esc"])],onMousedown:pe}),Ne({_:2},[e.$slots.prepend?{name:"prepend",fn:v(()=>[S(e.$slots,"prepend")])}:void 0,e.$slots.append?{name:"append",fn:v(()=>[S(e.$slots,"append")])}:void 0,e.$slots.prefix?{name:"prefix",fn:v(()=>[S(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:v(()=>[S(e.$slots,"suffix")])}:void 0]),1040,["model-value","onKeydown"])],14,Ye)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var at=xe(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const ot=Be(at);const lt={class:"search-path"},nt={class:"input-box"},ut={class:"check-item"},rt={class:"link"},it=G({__name:"index",setup(c){const{router:F}=Ge(),p=F.getRoutes().filter(i=>i.meta.icon),o=d(""),O=(i,n)=>{const y=i?p.filter(B(i)):p;n(y)},B=i=>n=>n.meta.title.toLowerCase().indexOf(i.toLowerCase())!==-1||n.path.toLowerCase().indexOf(i.toLowerCase())!==-1,P=i=>{F.push(i.path),l.value=!1},l=d(!1),u=d();return Pe(()=>l.value,i=>{i?setTimeout(()=>{var n;(n=u.value)==null||n.focus()},200):o.value=""}),(i,n)=>{const y=te("svg-icon-vue"),V=ot,_=te("message-box-vue");return h(),N("div",lt,[b(y,{name:"sousuo",onClick:n[0]||(n[0]=s=>l.value=!0)}),(h(),H(Re,{to:"body"},[b(_,{isVisible:l.value,"onUpdate:isVisible":n[2]||(n[2]=s=>l.value=s)},{default:v(()=>[A("div",nt,[b(V,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value=s),"fetch-suggestions":O,"popper-class":"my-autocomplete",placeholder:"\u83DC\u5355\u641C\u7D22 \uFF1A\u652F\u6301\u83DC\u5355\u540D\u79F0\u3001\u8DEF\u5F84",onSelect:P,"prefix-icon":"search",ref_key:"autocomplete",ref:u},{default:v(({item:s})=>[A("div",ut,[(h(),H(Ke(s.meta.icon),{style:{width:"16px","margin-right":"10px"}})),A("span",rt,se(s.meta.title),1)])]),_:1},8,["modelValue"])])]),_:1},8,["isVisible"])]))])}}});const $t=Je(it,[["__scopeId","data-v-8921622c"]]);export{$t as default};
